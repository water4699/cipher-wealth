"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8178],{10557:(e,n,r)=>{r.d(n,{S:()=>l,z:()=>s});var t=r(95155),o=r(51012),c=r(56037),u=r(53139),i=r(12115);let a=(0,i.createContext)(void 0),l=e=>{let{children:n,initialMockChains:r}=e,l=function(e){let{initialMockChains:n}=e,{provider:r,chainId:t,accounts:a,isConnected:l,connect:s,error:d}=(0,u.h)(),[v,h]=(0,i.useState)(void 0),[f,g]=(0,i.useState)(void 0),[w,m]=(0,i.useState)(void 0),M=(0,i.useRef)(t),C=(0,i.useRef)(void 0),E=(0,i.useRef)(e=>e===M.current),p=(0,i.useRef)(e=>e===C.current);return(0,i.useEffect)(()=>{M.current=t},[t]),(0,i.useEffect)(()=>{if(!r||!t||!l||!a||0===a.length){C.current=void 0,h(void 0),g(void 0),m(void 0);return}console.warn("[useMetaMaskEthersSignerInternal] create new ethers.BrowserProvider(), chainId=".concat(t));let e=new o.k(r),u=e,i=null==n?void 0:n[t];i?(u=new c.FR(i),console.warn("[useMetaMaskEthersSignerInternal] create new readonly provider ethers.JsonRpcProvider(".concat(i,"), chainId=").concat(t))):console.warn("[useMetaMaskEthersSignerInternal] use ethers.BrowserProvider() as readonly provider, chainId=".concat(t));let s=new c.cP(e,a[0]);C.current=s,h(s),g(e),m(u)},[r,t,l,a,n]),{sameChain:E,sameSigner:p,provider:r,chainId:t,accounts:a,isConnected:l,connect:s,ethersBrowserProvider:f,ethersReadonlyProvider:w,ethersSigner:v,error:d,initialMockChains:n}}({initialMockChains:r});return(0,t.jsx)(a.Provider,{value:l,children:n})};function s(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useMetaMaskEthersSigner must be used within a MetaMaskEthersSignerProvider");return e}},53139:(e,n,r)=>{r.d(n,{r:()=>u,h:()=>i});var t=r(95155),o=r(12115);let c=(0,o.createContext)(void 0),u=e=>{let{children:n}=e,{provider:r,chainId:u,accounts:i,isConnected:a,error:l,connect:s}=function(){var e;let{error:n,providers:r}=function(){let[e,n]=(0,o.useState)(void 0),[r,t]=(0,o.useState)(void 0),c=(0,o.useRef)(0),u=(0,o.useRef)(!1),i=(0,o.useMemo)(()=>r?Object.values(r):[],[r]);return(0,o.useEffect)(()=>{let e=++c.current,r=e=>{if("detail"in e){var n;n=e.detail,t(e=>{if(!e)return{[n.info.uuid]:n};let r=e[n.info.uuid];return r&&r.info.uuid===n.info.uuid&&r.info.name===n.info.name&&r.info.rdns===n.info.rdns&&r.info.icon===n.info.icon&&r.provider===n.provider?e:(r?console.log("addUuid(".concat(n.info.uuid,") update existing.")):console.log("addUuid(".concat(n.info.uuid,") add new.")),{...e,[n.info.uuid]:n})})}};return(async()=>{if(e===c.current){if(u.current)return console.log("window is already listening!!!");n(void 0);try{window.addEventListener("eip6963:announceProvider",r)}catch(e){n(e instanceof Error?e:Error(String(e)));return}u.current=!0;try{window.dispatchEvent(new Event("eip6963:requestProvider"))}catch(e){window.removeEventListener("eip6963:announceProvider",r),n(e instanceof Error?e:Error(String(e))),u.current=!1}}})(),()=>{c.current=c.current+1,window.removeEventListener("eip6963:announceProvider",r)}},[]),{error:e,uuids:r,providers:i}}(),[t,c]=(0,o.useState)(void 0),[u,i]=(0,o.useState)(void 0),[a,l]=(0,o.useState)(void 0),s=(0,o.useRef)(void 0),d=(0,o.useRef)(void 0),v=(0,o.useRef)(void 0),h=(0,o.useRef)(void 0),f=(0,o.useRef)(void 0),g=!!t,w=(null!=(e=null==a?void 0:a.length)?e:0)>0,m=(0,o.useCallback)(()=>{t&&(a&&a.length>0||t.request({method:"eth_requestAccounts"}))},[t,a]);return(0,o.useEffect)(()=>{var e,n,t,o,u,a,g,w,m,M,C,E,p;let k,I,S,L,P;for(let e=0;e<r.length;++e)if("metamask"===r[e].info.name.toLowerCase()){k=r[e].provider;break}let b=f.current;b!==k&&(b&&(s.current&&(null==(e=b.off)||e.call(b,"connect",s.current),null==(n=b.removeListener)||n.call(b,"connect",s.current),s.current=void 0),d.current&&(null==(t=b.off)||t.call(b,"disconnect",d.current),null==(o=b.removeListener)||o.call(b,"disconnect",d.current),d.current=void 0),v.current&&(null==(u=b.off)||u.call(b,"chainChanged",v.current),null==(a=b.removeListener)||a.call(b,"chainChanged",v.current),v.current=void 0),h.current&&(null==(g=b.off)||g.call(b,"accountsChanged",h.current),null==(w=b.removeListener)||w.call(b,"accountsChanged",h.current),h.current=void 0)),c(void 0),i(void 0),l(void 0),f.current=k,s.current=void 0,d.current=void 0,v.current=void 0,h.current=void 0,k&&(s.current=I=e=>{k===f.current&&(console.log("[useMetaMask] on('connect') chainId=".concat(e.chainId)),c(k),i(Number.parseInt(e.chainId,16)))},d.current=S=e=>{k===f.current&&(console.log("[useMetaMask] on('disconnect') error code=".concat(e.code)),c(void 0),i(void 0),l(void 0))},v.current=L=e=>{k===f.current&&(console.log("[useMetaMask] on('chainChanged') chainId=".concat(e)),c(k),i(Number.parseInt(e,16)))},h.current=P=e=>{k===f.current&&(console.log("[useMetaMask] on('accountsChanged') accounts.length=".concat(e.length)),c(k),l(e))},k.on?(k.on("connect",I),k.on("disconnect",S),k.on("chainChanged",L),null==(m=k.on)||m.call(k,"accountsChanged",P)):(null==(M=k.addListener)||M.call(k,"connect",I),null==(C=k.addListener)||C.call(k,"disconnect",S),null==(E=k.addListener)||E.call(k,"chainChanged",L),null==(p=k.addListener)||p.call(k,"accountsChanged",P)),(async()=>{if(k===f.current)try{let[e,n]=await Promise.all([k.request({method:"eth_chainId"}),k.request({method:"eth_accounts"})]);console.log("[useMetaMask] connected to chainId=".concat(e," accounts.length=").concat(n.length)),c(k),i(Number.parseInt(e,16)),l(n)}catch(e){console.log("[useMetaMask] not connected!"),c(k),i(void 0),l(void 0)}})()))},[r]),(0,o.useEffect)(()=>()=>{let e=f.current;if(e){var n,r,t,o,c,u,i,a;let l=v.current,f=h.current,g=s.current,w=d.current;g&&(null==(n=e.off)||n.call(e,"connect",g),null==(r=e.removeListener)||r.call(e,"connect",g)),w&&(null==(t=e.off)||t.call(e,"disconnect",w),null==(o=e.removeListener)||o.call(e,"disconnect",w)),l&&(null==(c=e.off)||c.call(e,"chainChanged",l),null==(u=e.removeListener)||u.call(e,"chainChanged",l)),f&&(null==(i=e.off)||i.call(e,"accountsChanged",f),null==(a=e.removeListener)||a.call(e,"accountsChanged",f))}v.current=void 0,f.current=void 0},[]),{provider:t,chainId:u,accounts:a,isConnected:g&&w&&"number"==typeof u,error:n,connect:m}}();return(0,t.jsx)(c.Provider,{value:{provider:r,chainId:u,accounts:i,isConnected:a,error:l,connect:s},children:n})};function i(){let e=(0,o.useContext)(c);if(void 0===e)throw Error("useMetaMask must be used within a MetaMaskProvider");return e}},98814:(e,n,r)=>{r.d(n,{h:()=>v,p:()=>d});var t=r(95155),o=r(12115),c=r(67325),u=r(75777),i=r(15378),a=new WeakMap;class l{getItem(e){return(0,c._)(this,a).has(e)?(0,c._)(this,a).get(e):null}setItem(e,n){(0,c._)(this,a).set(e,n)}removeItem(e){(0,c._)(this,a).delete(e)}constructor(){(0,u._)(this,a,{writable:!0,value:void 0}),(0,i._)(this,a,new Map)}}let s=(0,o.createContext)(void 0),d=()=>{let e=(0,o.useContext)(s);if(!e)throw Error("useInMemoryStorage must be used within a InMemoryStorageProvider");return e},v=e=>{let{children:n}=e,[r]=(0,o.useState)(new l);return(0,t.jsx)(s.Provider,{value:{storage:r},children:n})}}}]);